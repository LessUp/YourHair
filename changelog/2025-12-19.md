# 2025-12-19

## 变更摘要

- fuseHairstyle 支持用户手动变换（x/y/scale/rotate/flip），并在缺失 faceData 或关闭 autoAlign 时回退到默认锚点对齐，避免无脑全屏叠加导致的拉伸/错位。
- AIFusionCanvas 渲染链路统一走 fuseHairstyle：使用离屏 baseCanvas 保持原有 cover 绘制效果，并把 faceData/hairMask 映射到画布坐标系后再融合，确保 hairMask/feather/colorAdjust 真正生效。
- 修复 featherRadius=0 时掩码羽化计算除零导致 NaN 的问题（0 表示不羽化）。

## 影响范围

- src/lib/hairFusion.js
- src/components/AIFusionCanvas.jsx
